group 'ru.r5am'

apply plugin: 'java'
apply plugin: 'application'

mainClassName = 'ru.r5am.FactoryMethod'

tasks.withType(JavaCompile) { options.encoding = 'UTF-8' }
[ compileJava, compileTestJava ]*.options*.encoding = 'UTF-8'


repositories {
    jcenter()
    mavenCentral()
}

dependencies {
//    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: ${log4jVersion}
    //    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: ${log4jVersion}
    compile "org.apache.logging.log4j:log4j-api:${log4jVersion}"
    compile "org.apache.logging.log4j:log4j-core:${log4jVersion}"
    testCompile "org.testng:testng:${gradle.properties.testNgVersion}"
}

// Кастомизация выходного JAR-файла
jar {
    baseName = 'FactoryMethod'			// Название jar-файла на выходе
    manifest {							// В файл MANIFEST.MF
        attributes(
                "Generated-By": "Gradle",
                "Main-Class": mainClassName,
                "Built-By": "Александр Ящук (Aleksandr Jashhuk), R5AM",
        )
    }
}

test {
    systemProperty "file.encoding", "utf-8"
    useTestNG()
}

run {
    systemProperty "file.encoding", "cp866"     // Русские в Windows консоли
}
